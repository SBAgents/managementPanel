<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="dashboard.title">–î–∞—à–±–æ—Ä–¥ | –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-bg: #0a1929;
            --sidebar-bg: #07111f;
            --card-bg: #132f4c;
            --accent: #3399ff;
            --accent-hover: #297acc;
            --text: #e3f2fd;
            --text-secondary: #90caf9;
            --border: #1e4976;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --sidebar-width: 260px;
            --header-height: 70px;
            --border-radius: 12px;
            --transition: all 0.3s ease;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            --font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: var(--primary-bg);
            color: var(--text);
            line-height: 1.6;
            font-size: 14px;
            overflow-x: hidden;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border);
            padding: 20px 0;
            z-index: 100;
            transition: var(--transition);
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 0 20px 30px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 20px;
            font-weight: 700;
            color: var(--accent);
        }

        .logo i {
            font-size: 24px;
        }

        .user-info {
            padding: 0 20px;
            margin-bottom: 30px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent), #66b3ff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 20px;
            margin-bottom: 10px;
            color: white;
        }

        .user-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .user-role {
            font-size: 13px;
            color: var(--text-secondary);
            background: rgba(51, 153, 255, 0.1);
            padding: 4px 10px;
            border-radius: 20px;
            display: inline-block;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
            border-left: 3px solid transparent;
            font-weight: 500;
        }

        .nav-link:hover {
            background: rgba(51, 153, 255, 0.1);
            color: var(--text);
        }

        .nav-link.active {
            background: rgba(51, 153, 255, 0.15);
            color: var(--accent);
            border-left-color: var(--accent);
        }

        .nav-link i {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 20px;
            min-height: 100vh;
            transition: var(--transition);
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 0 20px;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border);
        }

        .header-title h1 {
            font-size: 24px;
            font-weight: 700;
        }

        .header-title p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .language-selector {
            position: relative;
        }

        .lang-btn {
            background: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 8px 16px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            transition: var(--transition);
        }

        .lang-btn:hover {
            background: rgba(51, 153, 255, 0.1);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: var(--sidebar-bg);
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
            min-width: 140px;
            display: none;
            z-index: 1000;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .lang-option {
            padding: 12px 16px;
            cursor: pointer;
            color: var(--text);
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .lang-option:hover {
            background: rgba(51, 153, 255, 0.1);
        }

        .logout-btn {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: var(--danger);
            padding: 10px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: var(--transition);
        }

        .logout-btn:hover {
            background: rgba(244, 67, 54, 0.2);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid var(--border);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            background: rgba(51, 153, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            color: var(--accent);
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        .stat-change {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 13px;
            margin-top: 10px;
        }

        .stat-change.positive {
            color: var(--success);
        }

        .stat-change.negative {
            color: var(--danger);
        }

        /* Tables */
        .table-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 30px;
        }

        .table-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-header h3 {
            font-size: 18px;
            font-weight: 600;
        }

        .table-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .btn-danger {
            background: rgba(244, 67, 54, 0.1);
            color: var(--danger);
            border: 1px solid rgba(244, 67, 54, 0.3);
        }

        .btn-danger:hover {
            background: rgba(244, 67, 54, 0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn.loading {
            position: relative;
            color: transparent;
        }

        .btn.loading::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            padding: 15px;
            border-top: 1px solid var(--border);
        }

        tbody tr:hover {
            background: rgba(51, 153, 255, 0.05);
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .status-active {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success);
        }

        .status-inactive {
            background: rgba(158, 158, 158, 0.1);
            color: var(--text-secondary);
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            background: transparent;
            border: 1px solid transparent;
            color: var(--text-secondary);
        }

        .action-btn:hover {
            background: rgba(51, 153, 255, 0.1);
            color: var(--accent);
            border-color: var(--border);
        }

        .action-btn.edit:hover {
            background: rgba(255, 193, 7, 0.1);
            color: #ffc107;
        }

        .action-btn.delete:hover {
            background: rgba(244, 67, 54, 0.1);
            color: var(--danger);
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 18px;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 20px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: var(--transition);
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
        }

        .modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(51, 153, 255, 0.1);
        }

        .form-control::placeholder {
            color: var(--text-secondary);
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Loading States */
        .skeleton {
            background: linear-gradient(90deg, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.05) 75%);
            background-size: 200% 100%;
            animation: skeletonLoading 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes skeletonLoading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
                width: 280px;
            }
            .sidebar.active {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
            }
            .menu-toggle {
                display: flex;
            }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .table-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            .table-actions {
                width: 100%;
                overflow-x: auto;
                padding-bottom: 10px;
            }
        }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            width: 40px;
            height: 40px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            color: var(--text);
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 99;
        }

        /* RTL Support */
        [dir="rtl"] .sidebar {
            left: auto;
            right: 0;
            border-right: none;
            border-left: 1px solid var(--border);
        }

        [dir="rtl"] .main-content {
            margin-left: 0;
            margin-right: var(--sidebar-width);
        }

        [dir="rtl"] .stat-card::before {
            left: auto;
            right: 0;
        }

        [dir="rtl"] .nav-link {
            border-left: none;
            border-right: 3px solid transparent;
        }

        [dir="rtl"] .nav-link.active {
            border-right-color: var(--accent);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            background: var(--card-bg);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 3000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
            max-width: 400px;
            box-shadow: var(--shadow);
        }

        .notification.active {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--danger);
        }

        .notification.warning {
            border-left: 4px solid var(--warning);
        }

        .notification-icon {
            font-size: 20px;
        }

        .notification.success .notification-icon {
            color: var(--success);
        }

        .notification.error .notification-icon {
            color: var(--danger);
        }

        .notification.warning .notification-icon {
            color: var(--warning);
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .notification-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <div class="menu-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <span data-i18n="sidebar.title">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</span>
            </div>
        </div>

        <div class="user-info">
            <div class="user-avatar" id="userAvatar">JD</div>
            <div class="user-name" id="userName">John Doe</div>
            <div class="user-role" id="userRole">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
        </div>

        <ul class="nav-menu">
            <li class="nav-item">
                <a href="#dashboard" class="nav-link active" onclick="showSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span data-i18n="sidebar.dashboard">–î–∞—à–±–æ—Ä–¥</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#wallets" class="nav-link" onclick="showSection('wallets')">
                    <i class="fas fa-wallet"></i>
                    <span data-i18n="sidebar.wallets">–ö–æ—à–µ–ª—å–∫–∏</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#forms" class="nav-link" onclick="showSection('forms')">
                    <i class="fas fa-file-alt"></i>
                    <span data-i18n="sidebar.forms">–§–æ—Ä–º—ã</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#agents" class="nav-link" onclick="showSection('agents')">
                    <i class="fas fa-users"></i>
                    <span data-i18n="sidebar.agents">–ê–≥–µ–Ω—Ç—ã</span>
                </a>
            </li>
            <li class="nav-item" id="adminsSection" style="display: none;">
                <a href="#admins" class="nav-link" onclick="showSection('admins')">
                    <i class="fas fa-user-shield"></i>
                    <span data-i18n="sidebar.admins">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-title">
                <h1 id="pageTitle" data-i18n="dashboard.title">–î–∞—à–±–æ—Ä–¥</h1>
                <p id="pageSubtitle" data-i18n="dashboard.subtitle">–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</p>
            </div>

            <div class="header-actions">
                <div class="language-selector">
                    <button class="lang-btn" onclick="toggleLanguageDropdown()">
                        <span id="currentLang">üá∑üá∫ RU</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="lang-dropdown" id="langDropdown">
                        <div class="lang-option" onclick="setLanguage('ru')">
                            <span>üá∑üá∫</span>
                            <span data-i18n="lang.russian">–†—É—Å—Å–∫–∏–π</span>
                        </div>
                        <div class="lang-option" onclick="setLanguage('en')">
                            <span>üá∫üá∏</span>
                            <span data-i18n="lang.english">English</span>
                        </div>
                        <div class="lang-option" onclick="setLanguage('fr')">
                            <span>üá´üá∑</span>
                            <span data-i18n="lang.french">Fran√ßais</span>
                        </div>
                        <div class="lang-option" onclick="setLanguage('ar')">
                            <span>üá∏üá¶</span>
                            <span data-i18n="lang.arabic">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
                        </div>
                    </div>
                </div>

                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span data-i18n="header.logout">–í—ã–π—Ç–∏</span>
                </button>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboardSection" class="section active">
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-wallet"></i>
                    </div>
                    <div class="stat-value" id="totalWallets">0</div>
                    <div class="stat-label" data-i18n="stats.total_wallets">–í—Å–µ–≥–æ –∫–æ—à–µ–ª—å–∫–æ–≤</div>
                    <div class="stat-change positive" id="walletsChange">
                        <i class="fas fa-arrow-up"></i>
                        <span>+12%</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="stat-value" id="activeForms">0</div>
                    <div class="stat-label" data-i18n="stats.active_forms">–ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–æ—Ä–º—ã</div>
                    <div class="stat-change positive" id="formsChange">
                        <i class="fas fa-arrow-up"></i>
                        <span>+5%</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-value" id="totalAgents">0</div>
                    <div class="stat-label" data-i18n="stats.total_agents">–í—Å–µ–≥–æ –∞–≥–µ–Ω—Ç–æ–≤</div>
                    <div class="stat-change negative" id="agentsChange">
                        <i class="fas fa-arrow-down"></i>
                        <span>-2%</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <div class="stat-value" id="totalTransactions">0</div>
                    <div class="stat-label" data-i18n="stats.transactions">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞ —Å—É—Ç–∫–∏</div>
                    <div class="stat-change positive" id="transactionsChange">
                        <i class="fas fa-arrow-up"></i>
                        <span>+24%</span>
                    </div>
                </div>
            </div>

            <!-- Recent Wallets Table -->
            <div class="table-container">
                <div class="table-header">
                    <h3 data-i18n="dashboard.recent_wallets">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∏</h3>
                    <div class="table-actions">
                        <button class="btn btn-primary" onclick="loadWallets()">
                            <i class="fas fa-sync-alt"></i>
                            <span data-i18n="button.refresh">–û–±–Ω–æ–≤–∏—Ç—å</span>
                        </button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th data-i18n="table.type">–¢–∏–ø</th>
                                <th data-i18n="table.name">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th data-i18n="table.number">–ù–æ–º–µ—Ä</th>
                                <th data-i18n="table.status">–°—Ç–∞—Ç—É—Å</th>
                                <th data-i18n="table.form">–§–æ—Ä–º–∞</th>
                                <th data-i18n="table.actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="walletsTableBody">
                            <!-- Wallets will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Wallets Section -->
        <div id="walletsSection" class="section" style="display: none;">
            <div class="table-container">
                <div class="table-header">
                    <h3 data-i18n="wallets.title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞–º–∏</h3>
                    <div class="table-actions">
                        <button class="btn btn-primary" onclick="loadWallets()">
                            <i class="fas fa-sync-alt"></i>
                            <span data-i18n="button.refresh">–û–±–Ω–æ–≤–∏—Ç—å</span>
                        </button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th data-i18n="table.type">–¢–∏–ø</th>
                                <th data-i18n="table.name">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th data-i18n="table.number">–ù–æ–º–µ—Ä</th>
                                <th data-i18n="table.status">–°—Ç–∞—Ç—É—Å</th>
                                <th data-i18n="table.form">–§–æ—Ä–º–∞</th>
                                <th data-i18n="table.actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="allWalletsTableBody">
                            <!-- All wallets will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Forms Section -->
        <div id="formsSection" class="section" style="display: none;">
            <div class="table-container">
                <div class="table-header">
                    <h3 data-i18n="forms.title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞–º–∏</h3>
                    <div class="table-actions">
                        <button class="btn btn-primary" onclick="loadForms()">
                            <i class="fas fa-sync-alt"></i>
                            <span data-i18n="button.refresh">–û–±–Ω–æ–≤–∏—Ç—å</span>
                        </button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th data-i18n="forms.name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã</th>
                                <th data-i18n="forms.status">–°—Ç–∞—Ç—É—Å</th>
                                <th data-i18n="forms.service_mode">–†–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</th>
                                <th data-i18n="forms.assigned_agents">–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã</th>
                                <th data-i18n="table.actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="formsTableBody">
                            <!-- Forms will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Agents Section -->
        <div id="agentsSection" class="section" style="display: none;">
            <div class="table-container">
                <div class="table-header">
                    <h3 data-i18n="agents.title">–ê–≥–µ–Ω—Ç—ã (–ú–µ–Ω–µ–¥–∂–µ—Ä—ã)</h3>
                    <div class="table-actions">
                        <button class="btn btn-primary" onclick="loadAgents()">
                            <i class="fas fa-sync-alt"></i>
                            <span data-i18n="button.refresh">–û–±–Ω–æ–≤–∏—Ç—å</span>
                        </button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th data-i18n="agents.username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                                <th data-i18n="agents.email">Email</th>
                                <th data-i18n="agents.assigned_forms">–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã</th>
                                <th data-i18n="agents.last_login">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</th>
                                <th data-i18n="agents.status">–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="agentsTableBody">
                            <!-- Agents will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Admins Section -->
        <div id="adminsSectionContent" class="section" style="display: none;">
            <div class="table-container">
                <div class="table-header">
                    <h3 data-i18n="admins.title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏</h3>
                    <div class="table-actions">
                        <button class="btn btn-primary" onclick="showCreateAdminModal()">
                            <i class="fas fa-plus"></i>
                            <span data-i18n="admins.create">–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</span>
                        </button>
                        <button class="btn btn-secondary" onclick="loadAdmins()">
                            <i class="fas fa-sync-alt"></i>
                            <span data-i18n="button.refresh">–û–±–Ω–æ–≤–∏—Ç—å</span>
                        </button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th data-i18n="admins.username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                                <th data-i18n="admins.email">Email</th>
                                <th data-i18n="admins.role">–†–æ–ª—å</th>
                                <th data-i18n="admins.created">–°–æ–∑–¥–∞–Ω</th>
                                <th data-i18n="admins.last_login">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</th>
                                <th data-i18n="admins.status">–°—Ç–∞—Ç—É—Å</th>
                                <th data-i18n="table.actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="adminsTableBody">
                            <!-- Admins will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Wallet Modal -->
    <div class="modal" id="editWalletModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.edit_wallet">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—à–µ–ª—ë–∫</h3>
                <button class="modal-close" onclick="closeModal('editWalletModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="editWalletForm" onsubmit="updateWallet(event)">
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.wallet_type">–¢–∏–ø –∫–æ—à–µ–ª—å–∫–∞</label>
                        <select class="form-control" id="editWalletType" required>
                            <option value="vodafone">Vodafone Cash</option>
                            <option value="instapay">InstaPay</option>
                            <option value="paypal">PayPal</option>
                            <option value="bank">–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.wallet_name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞</label>
                        <input type="text" class="form-control" id="editWalletName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.wallet_number">–ù–æ–º–µ—Ä –∫–æ—à–µ–ª—å–∫–∞</label>
                        <input type="text" class="form-control" id="editWalletNumber" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.wallet_form">–ü—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞</label>
                        <select class="form-control" id="editWalletForm" required>
                            <!-- Forms will be populated here -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.wallet_status">–°—Ç–∞—Ç—É—Å</label>
                        <select class="form-control" id="editWalletStatus" required>
                            <option value="true" data-i18n="status.active">–ê–∫—Ç–∏–≤–Ω—ã–π</option>
                            <option value="false" data-i18n="status.inactive">–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('editWalletModal')">
                    <span data-i18n="button.cancel">–û—Ç–º–µ–Ω–∞</span>
                </button>
                <button class="btn btn-primary" type="submit" form="editWalletForm">
                    <span data-i18n="button.save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Create Admin Modal -->
    <div class="modal" id="createAdminModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.create_admin">–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                <button class="modal-close" onclick="closeModal('createAdminModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="createAdminForm" onsubmit="createAdmin(event)">
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <input type="text" class="form-control" id="adminUsername" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.email">Email</label>
                        <input type="email" class="form-control" id="adminEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.password">–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" class="form-control" id="adminPassword" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.role">–†–æ–ª—å</label>
                        <select class="form-control" id="adminRole" required>
                            <option value="admin" data-i18n="role.admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                            <option value="superadmin" data-i18n="role.superadmin">–°—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('createAdminModal')">
                    <span data-i18n="button.cancel">–û—Ç–º–µ–Ω–∞</span>
                </button>
                <button class="btn btn-primary" type="submit" form="createAdminForm">
                    <span data-i18n="button.create">–°–æ–∑–¥–∞—Ç—å</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Assign Agent Modal -->
    <div class="modal" id="assignAgentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.assign_agent">–ù–∞–∑–Ω–∞—á–∏—Ç—å –∞–≥–µ–Ω—Ç–∞</h3>
                <button class="modal-close" onclick="closeModal('assignAgentModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="assignAgentForm" onsubmit="assignAgentToForm(event)">
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.select_form">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º—É</label>
                        <select class="form-control" id="assignFormSelect" required>
                            <!-- Forms will be populated here -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.select_agent">–í—ã–±–µ—Ä–∏—Ç–µ –∞–≥–µ–Ω—Ç–∞</label>
                        <select class="form-control" id="assignAgentSelect" required>
                            <!-- Agents will be populated here -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="modal.access_level">–£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞</label>
                        <select class="form-control" id="assignAccessLevel" required>
                            <option value="full" data-i18n="access.full">–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø</option>
                            <option value="readonly" data-i18n="access.readonly">–¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('assignAgentModal')">
                    <span data-i18n="button.cancel">–û—Ç–º–µ–Ω–∞</span>
                </button>
                <button class="btn btn-primary" type="submit" form="assignAgentForm">
                    <span data-i18n="button.assign">–ù–∞–∑–Ω–∞—á–∏—Ç—å</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="notification-content">
            <div class="notification-title" id="notificationTitle">–£—Å–ø–µ—Ö!</div>
            <div class="notification-message" id="notificationMessage">–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ</div>
        </div>
        <button class="notification-close" onclick="hideNotification()">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <script>
        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        const API_URL = 'https://script.google.com/macros/s/YOUR_DEPLOYED_SCRIPT_ID/exec';
        let currentUser = null;
        let currentSection = 'dashboard';
        let currentFormId = null;
        let currentWalletId = null;

        // ==================== –Ø–ó–´–ö–û–í–´–ï –†–ï–°–£–†–°–´ ====================
        const translations = {
            ru: {
                // –û–±—â–∏–µ
                "lang.russian": "–†—É—Å—Å–∫–∏–π",
                "lang.english": "English",
                "lang.french": "Fran√ßais",
                "lang.arabic": "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",
                
                // –ó–∞–≥–æ–ª–æ–≤–∫–∏
                "sidebar.title": "–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
                "sidebar.dashboard": "–î–∞—à–±–æ—Ä–¥",
                "sidebar.wallets": "–ö–æ—à–µ–ª—å–∫–∏",
                "sidebar.forms": "–§–æ—Ä–º—ã",
                "sidebar.agents": "–ê–≥–µ–Ω—Ç—ã",
                "sidebar.admins": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã",
                
                "dashboard.title": "–î–∞—à–±–æ—Ä–¥",
                "dashboard.subtitle": "–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥",
                "dashboard.recent_wallets": "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∏",
                
                "wallets.title": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞–º–∏",
                "forms.title": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞–º–∏",
                "agents.title": "–ê–≥–µ–Ω—Ç—ã (–ú–µ–Ω–µ–¥–∂–µ—Ä—ã)",
                "admins.title": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏",
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                "stats.total_wallets": "–í—Å–µ–≥–æ –∫–æ—à–µ–ª—å–∫–æ–≤",
                "stats.active_forms": "–ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–æ—Ä–º—ã",
                "stats.total_agents": "–í—Å–µ–≥–æ –∞–≥–µ–Ω—Ç–æ–≤",
                "stats.transactions": "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞ —Å—É—Ç–∫–∏",
                
                // –¢–∞–±–ª–∏—Ü—ã
                "table.type": "–¢–∏–ø",
                "table.name": "–ù–∞–∑–≤–∞–Ω–∏–µ",
                "table.number": "–ù–æ–º–µ—Ä",
                "table.status": "–°—Ç–∞—Ç—É—Å",
                "table.form": "–§–æ—Ä–º–∞",
                "table.actions": "–î–µ–π—Å—Ç–≤–∏—è",
                "table.created": "–°–æ–∑–¥–∞–Ω",
                "table.updated": "–û–±–Ω–æ–≤–ª—ë–Ω",
                
                // –§–æ—Ä–º—ã
                "forms.name": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã",
                "forms.status": "–°—Ç–∞—Ç—É—Å",
                "forms.service_mode": "–†–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è",
                "forms.assigned_agents": "–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã",
                "forms.api_url": "API URL",
                
                // –ê–≥–µ–Ω—Ç—ã
                "agents.username": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
                "agents.email": "Email",
                "agents.assigned_forms": "–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã",
                "agents.last_login": "–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥",
                "agents.status": "–°—Ç–∞—Ç—É—Å",
                
                // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
                "admins.username": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
                "admins.email": "Email",
                "admins.role": "–†–æ–ª—å",
                "admins.created": "–°–æ–∑–¥–∞–Ω",
                "admins.last_login": "–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥",
                "admins.status": "–°—Ç–∞—Ç—É—Å",
                "admins.create": "–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞",
                
                // –ö–Ω–æ–ø–∫–∏
                "button.refresh": "–û–±–Ω–æ–≤–∏—Ç—å",
                "button.edit": "–ò–∑–º–µ–Ω–∏—Ç—å",
                "button.delete": "–£–¥–∞–ª–∏—Ç—å",
                "button.save": "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
                "button.cancel": "–û—Ç–º–µ–Ω–∞",
                "button.create": "–°–æ–∑–¥–∞—Ç—å",
                "button.assign": "–ù–∞–∑–Ω–∞—á–∏—Ç—å",
                "button.manage": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                "button.remove": "–£–¥–∞–ª–∏—Ç—å",
                
                // –ó–∞–≥–æ–ª–æ–≤–æ–∫
                "header.logout": "–í—ã–π—Ç–∏",
                
                // –°—Ç–∞—Ç—É—Å—ã
                "status.active": "–ê–∫—Ç–∏–≤–Ω—ã–π",
                "status.inactive": "–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π",
                "status.on": "–í–∫–ª",
                "status.off": "–í—ã–∫–ª",
                "status.enabled": "–í–∫–ª—é—á–µ–Ω–∞",
                "status.disabled": "–í—ã–∫–ª—é—á–µ–Ω–∞",
                
                // –†–æ–ª–∏
                "role.admin": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
                "role.superadmin": "–°—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
                "role.manager": "–ú–µ–Ω–µ–¥–∂–µ—Ä",
                "role.viewer": "–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å",
                
                // –£—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞
                "access.full": "–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø",
                "access.readonly": "–¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ",
                
                // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
                "modal.edit_wallet": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—à–µ–ª—ë–∫",
                "modal.create_admin": "–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞",
                "modal.assign_agent": "–ù–∞–∑–Ω–∞—á–∏—Ç—å –∞–≥–µ–Ω—Ç–∞",
                "modal.wallet_type": "–¢–∏–ø –∫–æ—à–µ–ª—å–∫–∞",
                "modal.wallet_name": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞",
                "modal.wallet_number": "–ù–æ–º–µ—Ä –∫–æ—à–µ–ª—å–∫–∞",
                "modal.wallet_form": "–ü—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞",
                "modal.wallet_status": "–°—Ç–∞—Ç—É—Å",
                "modal.username": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
                "modal.email": "Email",
                "modal.password": "–ü–∞—Ä–æ–ª—å",
                "modal.role": "–†–æ–ª—å",
                "modal.select_form": "–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º—É",
                "modal.select_agent": "–í—ã–±–µ—Ä–∏—Ç–µ –∞–≥–µ–Ω—Ç–∞",
                "modal.access_level": "–£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞",
                
                // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                "notification.success": "–£—Å–ø–µ—Ö",
                "notification.error": "–û—à–∏–±–∫–∞",
                "notification.warning": "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ",
                "notification.loading": "–ó–∞–≥—Ä—É–∑–∫–∞...",
                "notification.saved": "–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã",
                "notification.created": "–ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞",
                "notification.deleted": "–ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞",
                "notification.assigned": "–ê–≥–µ–Ω—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω",
                "notification.removed": "–ê–≥–µ–Ω—Ç —É–¥–∞–ª—ë–Ω",
                
                // –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
                "error.load_failed": "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ",
                "error.save_failed": "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è",
                "error.delete_failed": "–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å",
                "error.unauthorized": "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω",
                "error.session_expired": "–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞",
                
                // –¢–µ–∫—Å—Ç –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
                "placeholder.search": "–ü–æ–∏—Å–∫...",
                "placeholder.select": "–í—ã–±–µ—Ä–∏—Ç–µ..."
            },
            en: {
                // General
                "lang.russian": "Russian",
                "lang.english": "English",
                "lang.french": "French",
                "lang.arabic": "Arabic",
                
                // Titles
                "sidebar.title": "Control Panel",
                "sidebar.dashboard": "Dashboard",
                "sidebar.wallets": "Wallets",
                "sidebar.forms": "Forms",
                "sidebar.agents": "Agents",
                "sidebar.admins": "Administrators",
                
                "dashboard.title": "Dashboard",
                "dashboard.subtitle": "General statistics and monitoring",
                "dashboard.recent_wallets": "Recent Wallets",
                
                "wallets.title": "Wallet Management",
                "forms.title": "Form Management",
                "agents.title": "Agents (Managers)",
                "admins.title": "Administrator Management",
                
                // Statistics
                "stats.total_wallets": "Total Wallets",
                "stats.active_forms": "Active Forms",
                "stats.total_agents": "Total Agents",
                "stats.transactions": "24h Transactions",
                
                // Tables
                "table.type": "Type",
                "table.name": "Name",
                "table.number": "Number",
                "table.status": "Status",
                "table.form": "Form",
                "table.actions": "Actions",
                "table.created": "Created",
                "table.updated": "Updated",
                
                // Forms
                "forms.name": "Form Name",
                "forms.status": "Status",
                "forms.service_mode": "Service Mode",
                "forms.assigned_agents": "Assigned Agents",
                "forms.api_url": "API URL",
                
                // Agents
                "agents.username": "Username",
                "agents.email": "Email",
                "agents.assigned_forms": "Assigned Forms",
                "agents.last_login": "Last Login",
                "agents.status": "Status",
                
                // Administrators
                "admins.username": "Username",
                "admins.email": "Email",
                "admins.role": "Role",
                "admins.created": "Created",
                "admins.last_login": "Last Login",
                "admins.status": "Status",
                "admins.create": "Create Administrator",
                
                // Buttons
                "button.refresh": "Refresh",
                "button.edit": "Edit",
                "button.delete": "Delete",
                "button.save": "Save",
                "button.cancel": "Cancel",
                "button.create": "Create",
                "button.assign": "Assign",
                "button.manage": "Manage",
                "button.remove": "Remove",
                
                // Header
                "header.logout": "Logout",
                
                // Statuses
                "status.active": "Active",
                "status.inactive": "Inactive",
                "status.on": "On",
                "status.off": "Off",
                "status.enabled": "Enabled",
                "status.disabled": "Disabled",
                
                // Roles
                "role.admin": "Administrator",
                "role.superadmin": "Super Administrator",
                "role.manager": "Manager",
                "role.viewer": "Viewer",
                
                // Access levels
                "access.full": "Full Access",
                "access.readonly": "Read Only",
                
                // Modals
                "modal.edit_wallet": "Edit Wallet",
                "modal.create_admin": "Create Administrator",
                "modal.assign_agent": "Assign Agent",
                "modal.wallet_type": "Wallet Type",
                "modal.wallet_name": "Wallet Name",
                "modal.wallet_number": "Wallet Number",
                "modal.wallet_form": "Linked Form",
                "modal.wallet_status": "Status",
                "modal.username": "Username",
                "modal.email": "Email",
                "modal.password": "Password",
                "modal.role": "Role",
                "modal.select_form": "Select Form",
                "modal.select_agent": "Select Agent",
                "modal.access_level": "Access Level",
                
                // Notifications
                "notification.success": "Success",
                "notification.error": "Error",
                "notification.warning": "Warning",
                "notification.loading": "Loading...",
                "notification.saved": "Changes saved",
                "notification.created": "Record created",
                "notification.deleted": "Record deleted",
                "notification.assigned": "Agent assigned",
                "notification.removed": "Agent removed",
                
                // Error messages
                "error.load_failed": "Failed to load data",
                "error.save_failed": "Failed to save changes",
                "error.delete_failed": "Failed to delete record",
                "error.unauthorized": "Access denied",
                "error.session_expired": "Session expired",
                
                // Placeholders
                "placeholder.search": "Search...",
                "placeholder.select": "Select..."
            },
            fr: {
                // G√©n√©ral
                "lang.russian": "Russe",
                "lang.english": "Anglais",
                "lang.french": "Fran√ßais",
                "lang.arabic": "Arabe",
                
                // Titres
                "sidebar.title": "Panneau de contr√¥le",
                "sidebar.dashboard": "Tableau de bord",
                "sidebar.wallets": "Portefeuilles",
                "sidebar.forms": "Formulaires",
                "sidebar.agents": "Agents",
                "sidebar.admins": "Administrateurs",
                
                "dashboard.title": "Tableau de bord",
                "dashboard.subtitle": "Statistiques g√©n√©rales et surveillance",
                "dashboard.recent_wallets": "Portefeuilles r√©cents",
                
                "wallets.title": "Gestion des portefeuilles",
                "forms.title": "Gestion des formulaires",
                "agents.title": "Agents (Gestionnaires)",
                "admins.title": "Gestion des administrateurs",
                
                // Statistiques
                "stats.total_wallets": "Total des portefeuilles",
                "stats.active_forms": "Formulaires actifs",
                "stats.total_agents": "Total des agents",
                "stats.transactions": "Transactions 24h",
                
                // Tables
                "table.type": "Type",
                "table.name": "Nom",
                "table.number": "Num√©ro",
                "table.status": "Statut",
                "table.form": "Formulaire",
                "table.actions": "Actions",
                "table.created": "Cr√©√©",
                "table.updated": "Mis √† jour",
                
                // Formulaires
                "forms.name": "Nom du formulaire",
                "forms.status": "Statut",
                "forms.service_mode": "Mode service",
                "forms.assigned_agents": "Agents assign√©s",
                "forms.api_url": "URL API",
                
                // Agents
                "agents.username": "Nom d'utilisateur",
                "agents.email": "Email",
                "agents.assigned_forms": "Formulaires assign√©s",
                "agents.last_login": "Derni√®re connexion",
                "agents.status": "Statut",
                
                // Administrateurs
                "admins.username": "Nom d'utilisateur",
                "admins.email": "Email",
                "admins.role": "R√¥le",
                "admins.created": "Cr√©√©",
                "admins.last_login": "Derni√®re connexion",
                "admins.status": "Statut",
                "admins.create": "Cr√©er un administrateur",
                
                // Boutons
                "button.refresh": "Actualiser",
                "button.edit": "Modifier",
                "button.delete": "Supprimer",
                "button.save": "Enregistrer",
                "button.cancel": "Annuler",
                "button.create": "Cr√©er",
                "button.assign": "Assigner",
                "button.manage": "G√©rer",
                "button.remove": "Supprimer",
                
                // En-t√™te
                "header.logout": "D√©connexion",
                
                // Statuts
                "status.active": "Actif",
                "status.inactive": "Inactif",
                "status.on": "Activ√©",
                "status.off": "D√©sactiv√©",
                "status.enabled": "Activ√©e",
                "status.disabled": "D√©sactiv√©e",
                
                // R√¥les
                "role.admin": "Administrateur",
                "role.superadmin": "Super administrateur",
                "role.manager": "Gestionnaire",
                "role.viewer": "Observateur",
                
                // Niveaux d'acc√®s
                "access.full": "Acc√®s complet",
                "access.readonly": "Lecture seule",
                
                // Fen√™tres modales
                "modal.edit_wallet": "Modifier le portefeuille",
                "modal.create_admin": "Cr√©er un administrateur",
                "modal.assign_agent": "Assigner un agent",
                "modal.wallet_type": "Type de portefeuille",
                "modal.wallet_name": "Nom du portefeuille",
                "modal.wallet_number": "Num√©ro du portefeuille",
                "modal.wallet_form": "Formulaire li√©",
                "modal.wallet_status": "Statut",
                "modal.username": "Nom d'utilisateur",
                "modal.email": "Email",
                "modal.password": "Mot de passe",
                "modal.role": "R√¥le",
                "modal.select_form": "S√©lectionner un formulaire",
                "modal.select_agent": "S√©lectionner un agent",
                "modal.access_level": "Niveau d'acc√®s",
                
                // Notifications
                "notification.success": "Succ√®s",
                "notification.error": "Erreur",
                "notification.warning": "Avertissement",
                "notification.loading": "Chargement...",
                "notification.saved": "Modifications enregistr√©es",
                "notification.created": "Enregistrement cr√©√©",
                "notification.deleted": "Enregistrement supprim√©",
                "notification.assigned": "Agent assign√©",
                "notification.removed": "Agent supprim√©",
                
                // Messages d'erreur
                "error.load_failed": "√âchec du chargement des donn√©es",
                "error.save_failed": "√âchec de l'enregistrement des modifications",
                "error.delete_failed": "√âchec de la suppression de l'enregistrement",
                "error.unauthorized": "Acc√®s refus√©",
                "error.session_expired": "Session expir√©e",
                
                // Placeholders
                "placeholder.search": "Rechercher...",
                "placeholder.select": "S√©lectionner..."
            },
            ar: {
                // ÿπÿßŸÖ
                "lang.russian": "ÿßŸÑÿ±Ÿàÿ≥Ÿäÿ©",
                "lang.english": "ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©",
                "lang.french": "ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿäÿ©",
                "lang.arabic": "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",
                
                // ÿßŸÑÿπŸÜÿßŸàŸäŸÜ
                "sidebar.title": "ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ",
                "sidebar.dashboard": "ŸÑŸàÿ≠ÿ© ÿßŸÑŸÇŸäÿßÿØÿ©",
                "sidebar.wallets": "ÿßŸÑŸÖÿ≠ÿßŸÅÿ∏",
                "sidebar.forms": "ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨",
                "sidebar.agents": "ÿßŸÑŸàŸÉŸÑÿßÿ°",
                "sidebar.admins": "ÿßŸÑŸÖÿ¥ÿ±ŸÅŸàŸÜ",
                
                "dashboard.title": "ŸÑŸàÿ≠ÿ© ÿßŸÑŸÇŸäÿßÿØÿ©",
                "dashboard.subtitle": "ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿπÿßŸÖÿ© ŸàŸÖÿ±ÿßŸÇÿ®ÿ©",
                "dashboard.recent_wallets": "ÿßŸÑŸÖÿ≠ÿßŸÅÿ∏ ÿßŸÑÿ£ÿÆŸäÿ±ÿ©",
                
                "wallets.title": "ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≠ÿßŸÅÿ∏",
                "forms.title": "ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨",
                "agents.title": "ÿßŸÑŸàŸÉŸÑÿßÿ° (ÿßŸÑŸÖÿØŸäÿ±ŸàŸÜ)",
                "admins.title": "ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ",
                
                // ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
                "stats.total_wallets": "ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ≠ÿßŸÅÿ∏",
                "stats.active_forms": "ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑŸÜÿ¥ÿ∑ÿ©",
                "stats.total_agents": "ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸàŸÉŸÑÿßÿ°",
                "stats.transactions": "ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ÿÆŸÑÿßŸÑ 24 ÿ≥ÿßÿπÿ©",
                
                // ÿßŸÑÿ¨ÿØÿßŸàŸÑ
                "table.type": "ÿßŸÑŸÜŸàÿπ",
                "table.name": "ÿßŸÑÿßÿ≥ŸÖ",
                "table.number": "ÿßŸÑÿ±ŸÇŸÖ",
                "table.status": "ÿßŸÑÿ≠ÿßŸÑÿ©",
                "table.form": "ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨",
                "table.actions": "ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™",
                "table.created": "ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°",
                "table.updated": "ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´",
                
                // ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨
                "forms.name": "ÿßÿ≥ŸÖ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨",
                "forms.status": "ÿßŸÑÿ≠ÿßŸÑÿ©",
                "forms.service_mode": "Ÿàÿ∂ÿπ ÿßŸÑÿÆÿØŸÖÿ©",
                "forms.assigned_agents": "ÿßŸÑŸàŸÉŸÑÿßÿ° ÿßŸÑŸÖÿπŸäŸÜŸàŸÜ",
                "forms.api_url": "ÿ±ÿßÿ®ÿ∑ API",
                
                // ÿßŸÑŸàŸÉŸÑÿßÿ°
                "agents.username": "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ",
                "agents.email": "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
                "agents.assigned_forms": "ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑŸÖÿπŸäŸÜÿ©",
                "agents.last_login": "ÿ¢ÿÆÿ± ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ",
                "agents.status": "ÿßŸÑÿ≠ÿßŸÑÿ©",
                
                // ÿßŸÑŸÖÿ¥ÿ±ŸÅŸàŸÜ
                "admins.username": "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ",
                "admins.email": "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
                "admins.role": "ÿßŸÑÿØŸàÿ±",
                "admins.created": "ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°",
                "admins.last_login": "ÿ¢ÿÆÿ± ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ",
                "admins.status": "ÿßŸÑÿ≠ÿßŸÑÿ©",
                "admins.create": "ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ¥ÿ±ŸÅ",
                
                // ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ±
                "button.refresh": "ÿ™ÿ≠ÿØŸäÿ´",
                "button.edit": "ÿ™ÿπÿØŸäŸÑ",
                "button.delete": "ÿ≠ÿ∞ŸÅ",
                "button.save": "ÿ≠ŸÅÿ∏",
                "button.cancel": "ÿ•ŸÑÿ∫ÿßÿ°",
                "button.create": "ÿ•ŸÜÿ¥ÿßÿ°",
                "button.assign": "ÿ™ÿπŸäŸäŸÜ",
                "button.manage": "ÿ•ÿØÿßÿ±ÿ©",
                "button.remove": "ÿ•ÿ≤ÿßŸÑÿ©",
                
                // ÿßŸÑÿ±ÿ£ÿ≥
                "header.logout": "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨",
                
                // ÿßŸÑÿ≠ÿßŸÑÿßÿ™
                "status.active": "ŸÜÿ¥ÿ∑",
                "status.inactive": "ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑",
                "status.on": "ÿ™ÿ¥ÿ∫ŸäŸÑ",
                "status.off": "ÿ•ŸäŸÇÿßŸÅ",
                "status.enabled": "ŸÖŸÅÿπŸÑ",
                "status.disabled": "ŸÖÿπÿ∑ŸÑ",
                
                // ÿßŸÑÿ£ÿØŸàÿßÿ±
                "role.admin": "ŸÖÿ¥ÿ±ŸÅ",
                "role.superadmin": "ŸÖÿ¥ÿ±ŸÅ ÿ±ÿ¶Ÿäÿ≥Ÿä",
                "role.manager": "ŸÖÿØŸäÿ±",
                "role.viewer": "ŸÖÿ¥ÿßŸáÿØ",
                
                // ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿßŸÑŸàÿµŸàŸÑ
                "access.full": "ŸàÿµŸàŸÑ ŸÉÿßŸÖŸÑ",
                "access.readonly": "ŸÇÿ±ÿßÿ°ÿ© ŸÅŸÇÿ∑",
                
                // ÿßŸÑŸÜŸàÿßŸÅÿ∞ ÿßŸÑŸÖŸÜÿ®ÿ´ŸÇÿ©
                "modal.edit_wallet": "ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©",
                "modal.create_admin": "ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ¥ÿ±ŸÅ",
                "modal.assign_agent": "ÿ™ÿπŸäŸäŸÜ ŸàŸÉŸäŸÑ",
                "modal.wallet_type": "ŸÜŸàÿπ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©",
                "modal.wallet_name": "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©",
                "modal.wallet_number": "ÿ±ŸÇŸÖ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©",
                "modal.wallet_form": "ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑŸÖÿ±ÿ™ÿ®ÿ∑",
                "modal.wallet_status": "ÿßŸÑÿ≠ÿßŸÑÿ©",
                "modal.username": "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ",
                "modal.email": "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
                "modal.password": "ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",
                "modal.role": "ÿßŸÑÿØŸàÿ±",
                "modal.select_form": "ÿßÿÆÿ™ÿ± ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨",
                "modal.select_agent": "ÿßÿÆÿ™ÿ± ÿßŸÑŸàŸÉŸäŸÑ",
                "modal.access_level": "ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑŸàÿµŸàŸÑ",
                
                // ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™
                "notification.success": "ŸÜÿ¨ÿßÿ≠",
                "notification.error": "ÿÆÿ∑ÿ£",
                "notification.warning": "ÿ™ÿ≠ÿ∞Ÿäÿ±",
                "notification.loading": "ÿ¨ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...",
                "notification.saved": "ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™",
                "notification.created": "ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≥ÿ¨ŸÑ",
                "notification.deleted": "ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≥ÿ¨ŸÑ",
                "notification.assigned": "ÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸàŸÉŸäŸÑ",
                "notification.removed": "ÿ™ŸÖ ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑŸàŸÉŸäŸÑ",
                
                // ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿÆÿ∑ÿ£
                "error.load_failed": "ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™",
                "error.save_failed": "ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™",
                "error.delete_failed": "ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≥ÿ¨ŸÑ",
                "error.unauthorized": "ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑŸàÿµŸàŸÑ",
                "error.session_expired": "ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑÿ¨ŸÑÿ≥ÿ©",
                
                // ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑŸÜÿßÿ¶ÿ®ÿ©
                "placeholder.search": "ÿ®ÿ≠ÿ´...",
                "placeholder.select": "ÿßÿÆÿ™ÿ±..."
            }
        };

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        document.addEventListener('DOMContentLoaded', async function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            await checkAuth();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —è–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            const savedLang = localStorage.getItem('preferred_lang') || 
                            (navigator.language.startsWith('ar') ? 'ar' : 
                             navigator.language.startsWith('fr') ? 'fr' : 
                             navigator.language.startsWith('en') ? 'en' : 'ru');
            setLanguage(savedLang);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥–∞
            await loadDashboardData();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
            initEventListeners();
            
            // –ê–¥–∞–ø—Ç–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–¥ —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            adaptInterfaceToRole();
        });

        // ==================== –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ====================
        async function checkAuth() {
            const token = localStorage.getItem('admin_token');
            const userData = localStorage.getItem('admin_user');
            
            if (!token || !userData) {
                window.location.href = 'index.html';
                return;
            }
            
            try {
                currentUser = JSON.parse(userData);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                document.getElementById('userName').textContent = currentUser.username;
                document.getElementById('userAvatar').textContent = 
                    currentUser.username.substring(0, 2).toUpperCase();
                document.getElementById('userRole').textContent = 
                    translations[currentLang][`role.${currentUser.role}`] || currentUser.role;
                    
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
                const response = await fetchWithAuth(`${API_URL}?action=verify_token&token=${token}`);
                if (!response.success) {
                    throw new Error('Invalid token');
                }
            } catch (error) {
                console.error('Auth error:', error);
                localStorage.removeItem('admin_token');
                localStorage.removeItem('admin_user');
                window.location.href = 'index.html';
            }
        }

        function logout() {
            localStorage.removeItem('admin_token');
            localStorage.removeItem('admin_user');
            window.location.href = 'index.html';
        }

        // ==================== –Ø–ó–´–ö–û–í–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('preferred_lang', lang);
            applyTranslations();
            updateLangButton();
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∞—Ä–∞–±—Å–∫–æ–≥–æ
            document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
        }

        function applyTranslations() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[currentLang] && translations[currentLang][key]) {
                    element.textContent = translations[currentLang][key];
                }
            });
            
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[currentLang] && translations[currentLang][key]) {
                    element.placeholder = translations[currentLang][key];
                }
            });
        }

        function updateLangButton() {
            const langText = currentLang === 'ru' ? 'üá∑üá∫ RU' : 
                           currentLang === 'en' ? 'üá∫üá∏ EN' : 
                           currentLang === 'fr' ? 'üá´üá∑ FR' : 'üá∏üá¶ AR';
            document.getElementById('currentLang').textContent = langText;
        }

        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('langDropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ —è–∑—ã–∫–æ–≤ –ø—Ä–∏ –∫–ª–∏–∫–µ —Å–Ω–∞—Ä—É–∂–∏
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.language-selector')) {
                document.getElementById('langDropdown').style.display = 'none';
            }
        });

        // ==================== –ù–ê–í–ò–ì–ê–¶–ò–Ø ====================
        function showSection(sectionId) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å–µ–∫—Ü–∏—é
            document.getElementById(`${sectionId}Section`).style.display = 'block';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ
            document.querySelector(`.nav-link[href="#${sectionId}"]`).classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            currentSection = sectionId;
            updatePageTitle();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–µ–∫—Ü–∏–∏
            switch(sectionId) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'wallets':
                    loadWallets();
                    break;
                case 'forms':
                    loadForms();
                    break;
                case 'agents':
                    loadAgents();
                    break;
                case 'admins':
                    loadAdmins();
                    break;
            }
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
            if (window.innerWidth < 992) {
                document.querySelector('.sidebar').classList.remove('active');
            }
        }

        function updatePageTitle() {
            const titleElement = document.getElementById('pageTitle');
            const subtitleElement = document.getElementById('pageSubtitle');
            
            switch(currentSection) {
                case 'dashboard':
                    titleElement.setAttribute('data-i18n', 'dashboard.title');
                    subtitleElement.setAttribute('data-i18n', 'dashboard.subtitle');
                    break;
                case 'wallets':
                    titleElement.setAttribute('data-i18n', 'wallets.title');
                    subtitleElement.setAttribute('data-i18n', '');
                    subtitleElement.textContent = '';
                    break;
                case 'forms':
                    titleElement.setAttribute('data-i18n', 'forms.title');
                    subtitleElement.setAttribute('data-i18n', '');
                    subtitleElement.textContent = '';
                    break;
                case 'agents':
                    titleElement.setAttribute('data-i18n', 'agents.title');
                    subtitleElement.setAttribute('data-i18n', '');
                    subtitleElement.textContent = '';
                    break;
                case 'admins':
                    titleElement.setAttribute('data-i18n', 'admins.title');
                    subtitleElement.setAttribute('data-i18n', '');
                    subtitleElement.textContent = '';
                    break;
            }
            
            applyTranslations();
        }

        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('active');
        }

        // ==================== API –§–£–ù–ö–¶–ò–ò ====================
        async function fetchWithAuth(url, options = {}) {
            const token = localStorage.getItem('admin_token');
            const fullUrl = `${url}${url.includes('?') ? '&' : '?'}token=${token}`;
            
            try {
                const response = await fetch(fullUrl, options);
                return await response.json();
            } catch (error) {
                console.error('API error:', error);
                showNotification('error', translations[currentLang]['error.load_failed']);
                throw error;
            }
        }

        // ==================== –î–ê–®–ë–û–†–î ====================
        async function loadDashboardData() {
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_dashboard_data`);
                
                if (data.success) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    document.getElementById('totalWallets').textContent = data.stats.totalWallets || 0;
                    document.getElementById('activeForms').textContent = data.stats.activeForms || 0;
                    document.getElementById('totalAgents').textContent = data.stats.totalAgents || 0;
                    document.getElementById('totalTransactions').textContent = data.stats.totalTransactions || 0;
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∏
                    await loadRecentWallets();
                }
            } catch (error) {
                console.error('Error loading dashboard:', error);
            }
        }

        async function loadRecentWallets() {
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_all_wallets`);
                
                if (data.success && data.wallets) {
                    const tableBody = document.getElementById('walletsTableBody');
                    tableBody.innerHTML = '';
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∫–æ—à–µ–ª—å–∫–æ–≤
                    const recentWallets = data.wallets.slice(0, 5);
                    
                    recentWallets.forEach(wallet => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${wallet.type}</td>
                            <td>${wallet.name}</td>
                            <td>${wallet.number}</td>
                            <td>
                                <span class="status-badge ${wallet.enabled ? 'status-active' : 'status-inactive'}">
                                    ${wallet.enabled ? translations[currentLang]['status.active'] : translations[currentLang]['status.inactive']}
                                </span>
                            </td>
                            <td>${wallet.form || '-'}</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn edit" onclick="editWallet('${wallet.id}')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        `;
                        tableBody.appendChild(row);
                    });
                }
            } catch (error) {
                console.error('Error loading recent wallets:', error);
            }
        }

        // ==================== –ö–û–®–ï–õ–¨–ö–ò ====================
        async function loadWallets() {
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_all_wallets`);
                
                if (data.success && data.wallets) {
                    const tableBody = document.getElementById('allWalletsTableBody');
                    tableBody.innerHTML = '';
                    
                    data.wallets.forEach(wallet => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${wallet.type}</td>
                            <td>${wallet.name}</td>
                            <td>${wallet.number}</td>
                            <td>
                                <span class="status-badge ${wallet.enabled ? 'status-active' : 'status-inactive'}">
                                    ${wallet.enabled ? translations[currentLang]['status.active'] : translations[currentLang]['status.inactive']}
                                </span>
                            </td>
                            <td>${wallet.form || '-'}</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn edit" onclick="editWallet('${wallet.id}')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        `;
                        tableBody.appendChild(row);
                    });
                    
                    showNotification('success', translations[currentLang]['notification.loading']);
                }
            } catch (error) {
                console.error('Error loading wallets:', error);
                showNotification('error', translations[currentLang]['error.load_failed']);
            }
        }

        async function editWallet(walletId) {
            currentWalletId = walletId;
            
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_wallet&id=${walletId}`);
                
                if (data.success && data.wallet) {
                    const wallet = data.wallet;
                    
                    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                    document.getElementById('editWalletType').value = wallet.type;
                    document.getElementById('editWalletName').value = wallet.name;
                    document.getElementById('editWalletNumber').value = wallet.number;
                    document.getElementById('editWalletStatus').value = wallet.enabled;
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–æ—Ä–º
                    await loadFormsForSelect();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                    openModal('editWalletModal');
                }
            } catch (error) {
                console.error('Error loading wallet:', error);
                showNotification('error', translations[currentLang]['error.load_failed']);
            }
        }

        async function updateWallet(event) {
            event.preventDefault();
            
            const formData = {
                id: currentWalletId,
                type: document.getElementById('editWalletType').value,
                name: document.getElementById('editWalletName').value,
                number: document.getElementById('editWalletNumber').value,
                form: document.getElementById('editWalletForm').value,
                enabled: document.getElementById('editWalletStatus').value
            };
            
            try {
                const button = event.target.querySelector('button[type="submit"]') || 
                             document.querySelector('#editWalletModal .btn-primary');
                const originalText = button.innerHTML;
                button.classList.add('loading');
                button.disabled = true;
                
                const data = await fetchWithAuth(`${API_URL}?action=update_wallet`, {
                    method: 'POST',
                    body: JSON.stringify(formData)
                });
                
                if (data.success) {
                    showNotification('success', translations[currentLang]['notification.saved']);
                    closeModal('editWalletModal');
                    await loadWallets();
                    if (currentSection === 'dashboard') {
                        await loadRecentWallets();
                    }
                } else {
                    showNotification('error', data.error || translations[currentLang]['error.save_failed']);
                }
            } catch (error) {
                console.error('Error updating wallet:', error);
                showNotification('error', translations[currentLang]['error.save_failed']);
            } finally {
                const button = document.querySelector('#editWalletModal .btn-primary');
                button.classList.remove('loading');
                button.disabled = false;
                button.innerHTML = originalText;
            }
        }

        // ==================== –§–û–†–ú–´ ====================
        async function loadForms() {
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_all_forms`);
                
                if (data.success && data.forms) {
                    const tableBody = document.getElementById('formsTableBody');
                    tableBody.innerHTML = '';
                    
                    data.forms.forEach(form => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${form.formName}</td>
                            <td>
                                <span class="status-badge ${form.enabled ? 'status-active' : 'status-inactive'}">
                                    ${form.enabled ? translations[currentLang]['status.enabled'] : translations[currentLang]['status.disabled']}
                                </span>
                            </td>
                            <td>
                                <span class="status-badge ${form.serviceMode ? 'status-inactive' : 'status-active'}">
                                    ${form.serviceMode ? translations[currentLang]['status.on'] : translations[currentLang]['status.off']}
                                </span>
                            </td>
                            <td>${form.assignedAgents || 0}</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn edit" onclick="manageFormAgents('${form.formName}')">
                                        <i class="fas fa-users-cog"></i>
                                    </button>
                                </div>
                            </td>
                        `;
                        tableBody.appendChild(row);
                    });
                    
                    showNotification('success', translations[currentLang]['notification.loading']);
                }
            } catch (error) {
                console.error('Error loading forms:', error);
                showNotification('error', translations[currentLang]['error.load_failed']);
            }
        }

        async function manageFormAgents(formName) {
            currentFormId = formName;
            
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_form_assignments&form_name=${encodeURIComponent(formName)}`);
                
                if (data.success) {
                    // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤
                    await loadAgentsForSelect();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞–º–∏
                    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
                    // –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Ö —É–¥–∞–ª–µ–Ω–∏—è/–¥–æ–±–∞–≤–ª–µ–Ω–∏—è
                    
                    showNotification('info', `–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏ –¥–ª—è —Ñ–æ—Ä–º—ã: ${formName}`);
                }
            } catch (error) {
                console.error('Error loading form assignments:', error);
                showNotification('error', translations[currentLang]['error.load_failed']);
            }
        }

        // ==================== –ê–ì–ï–ù–¢–´ ====================
        async function loadAgents() {
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_agents`);
                
                if (data.success && data.agents) {
                    const tableBody = document.getElementById('agentsTableBody');
                    tableBody.innerHTML = '';
                    
                    data.agents.forEach(agent => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${agent.username}</td>
                            <td>${agent.email}</td>
                            <td>${agent.assignedForms || 0}</td>
                            <td>${agent.lastLogin ? new Date(agent.lastLogin).toLocaleDateString() : '-'}</td>
                            <td>
                                <span class="status-badge ${agent.isActive ? 'status-active' : 'status-inactive'}">
                                    ${agent.isActive ? translations[currentLang]['status.active'] : translations[currentLang]['status.inactive']}
                                </span>
                            </td>
                        `;
                        tableBody.appendChild(row);
                    });
                    
                    showNotification('success', translations[currentLang]['notification.loading']);
                }
            } catch (error) {
                console.error('Error loading agents:', error);
                showNotification('error', translations[currentLang]['error.load_failed']);
            }
        }

        // ==================== –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–´ ====================
        async function loadAdmins() {
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_admins`);
                
                if (data.success && data.admins) {
                    const tableBody = document.getElementById('adminsTableBody');
                    tableBody.innerHTML = '';
                    
                    data.admins.forEach(admin => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${admin.username}</td>
                            <td>${admin.email}</td>
                            <td>${translations[currentLang][`role.${admin.role}`] || admin.role}</td>
                            <td>${admin.created ? new Date(admin.created).toLocaleDateString() : '-'}</td>
                            <td>${admin.lastLogin ? new Date(admin.lastLogin).toLocaleDateString() : '-'}</td>
                            <td>
                                <span class="status-badge ${admin.isActive ? 'status-active' : 'status-inactive'}">
                                    ${admin.isActive ? translations[currentLang]['status.active'] : translations[currentLang]['status.inactive']}
                                </span>
                            </td>
                            <td>
                                <div class="action-buttons">
                                    ${admin.username !== currentUser.username && currentUser.role === 'superadmin' ? `
                                        <button class="action-btn delete" onclick="deleteAdmin('${admin.username}')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    ` : ''}
                                </div>
                            </td>
                        `;
                        tableBody.appendChild(row);
                    });
                    
                    showNotification('success', translations[currentLang]['notification.loading']);
                }
            } catch (error) {
                console.error('Error loading admins:', error);
                showNotification('error', translations[currentLang]['error.load_failed']);
            }
        }

        function showCreateAdminModal() {
            openModal('createAdminModal');
        }

        async function createAdmin(event) {
            event.preventDefault();
            
            const formData = {
                username: document.getElementById('adminUsername').value,
                email: document.getElementById('adminEmail').value,
                password: document.getElementById('adminPassword').value,
                role: document.getElementById('adminRole').value
            };
            
            try {
                const button = event.target.querySelector('button[type="submit"]') || 
                             document.querySelector('#createAdminModal .btn-primary');
                const originalText = button.innerHTML;
                button.classList.add('loading');
                button.disabled = true;
                
                const data = await fetchWithAuth(`${API_URL}?action=create_admin`, {
                    method: 'POST',
                    body: JSON.stringify(formData)
                });
                
                if (data.success) {
                    showNotification('success', translations[currentLang]['notification.created']);
                    closeModal('createAdminModal');
                    await loadAdmins();
                    
                    // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                    document.getElementById('createAdminForm').reset();
                } else {
                    showNotification('error', data.error || translations[currentLang]['error.save_failed']);
                }
            } catch (error) {
                console.error('Error creating admin:', error);
                showNotification('error', translations[currentLang]['error.save_failed']);
            } finally {
                const button = document.querySelector('#createAdminModal .btn-primary');
                button.classList.remove('loading');
                button.disabled = false;
                button.innerHTML = originalText;
            }
        }

        async function deleteAdmin(username) {
            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ${username}?`)) {
                return;
            }
            
            try {
                const data = await fetchWithAuth(`${API_URL}?action=delete_admin&username=${encodeURIComponent(username)}`);
                
                if (data.success) {
                    showNotification('success', translations[currentLang]['notification.deleted']);
                    await loadAdmins();
                } else {
                    showNotification('error', data.error || translations[currentLang]['error.delete_failed']);
                }
            } catch (error) {
                console.error('Error deleting admin:', error);
                showNotification('error', translations[currentLang]['error.delete_failed']);
            }
        }

        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function showNotification(type, message, title = '') {
            const notification = document.getElementById('notification');
            const titleElement = document.getElementById('notificationTitle');
            const messageElement = document.getElementById('notificationMessage');
            
            notification.className = `notification ${type}`;
            titleElement.textContent = title || translations[currentLang][`notification.${type}`];
            messageElement.textContent = message;
            
            notification.classList.add('active');
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                hideNotification();
            }, 5000);
        }

        function hideNotification() {
            document.getElementById('notification').classList.remove('active');
        }

        function initEventListeners() {
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ñ–æ–Ω
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(event) {
                    if (event.target === this) {
                        this.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    }
                });
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –Ω–∞ Escape
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    document.querySelectorAll('.modal.active').forEach(modal => {
                        modal.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    });
                }
            });
        }

        function adaptInterfaceToRole() {
            const userRole = currentUser?.role;
            const adminsSection = document.getElementById('adminsSection');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —Ä–∞–∑–¥–µ–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
            if (userRole === 'superadmin' || userRole === 'admin') {
                adminsSection.style.display = 'block';
            } else {
                adminsSection.style.display = 'none';
            }
            
            // –ê–¥–∞–ø—Ç–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–¥ —Ä–æ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞
            if (userRole === 'manager') {
                // –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∏–º —Ñ–æ—Ä–º—ã
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–¥ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
            }
        }

        async function loadFormsForSelect() {
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_all_forms`);
                const select = document.getElementById('editWalletForm');
                select.innerHTML = '';
                
                if (data.success && data.forms) {
                    data.forms.forEach(form => {
                        const option = document.createElement('option');
                        option.value = form.formName;
                        option.textContent = form.formName;
                        select.appendChild(option);
                    });
                }
            } catch (error) {
                console.error('Error loading forms for select:', error);
            }
        }

        async function loadAgentsForSelect() {
            try {
                const data = await fetchWithAuth(`${API_URL}?action=get_agents`);
                const select = document.getElementById('assignAgentSelect');
                select.innerHTML = '';
                
                if (data.success && data.agents) {
                    data.agents.forEach(agent => {
                        const option = document.createElement('option');
                        option.value = agent.username;
                        option.textContent = `${agent.username} (${agent.email})`;
                        select.appendChild(option);
                    });
                }
            } catch (error) {
                console.error('Error loading agents for select:', error);
            }
        }

        // ==================== –ê–î–ê–ü–¢–ê–¶–ò–Ø –ü–û–î –ú–û–ë–ò–õ–¨–ù–´–ï –£–°–¢–†–û–ô–°–¢–í–ê ====================
        window.addEventListener('resize', function() {
            if (window.innerWidth >= 992) {
                document.querySelector('.sidebar').classList.remove('active');
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updatePageTitle();
    </script>
</body>
</html>
